# Description: Terminal emulator for X (Zeppe-Lin fork)
# URL:         https://github.com/zeppe-lin/st
# Depends on:  fontconfig freetype xorg-libx11 xorg-libxext xorg-libxft

name=st
version=0.8.5-1-ff586d8
release=1
source="https://github.com/zeppe-lin/st/archive/${version##*-}/st-$version.tar.gz
	st.desktop"

build() {
	cd st-${version##*-}*

	# apply user-defined configuration if exists
	if [ -f $PKGMK_ROOT/config.h ]; then
		cp $PKGMK_ROOT/config.h .
	fi

	# uncomment if you find a program that complains that st is
	# unknown, or not recognised, or unsupported, etc
	#make terminfo-entry

	# pick up system flags
	sed -ri '/^(C|LD)FLAGS/s/ = /+=/g' config.mk

	make PREFIX=/usr DESTDIR=$PKG install

	install -m 0644 -Dt $PKG/usr/share/applications $SRC/st.desktop
}
