# Description: Suckless Terminal emulator for X
# URL:         https://st.suckless.org/
# Depends on:  fontconfig freetype xorg-libx11 xorg-libxext xorg-libxft

name=st
version=0.9.2
release=1
source="https://dl.suckless.org/st/st-$version.tar.gz
	xrdb-plus.patch
	st.desktop"

build() {
	patch -d st-$version -Np1 -i $SRC/xrdb-plus.patch

	sed -i '/tic/d' st-$version/Makefile

	# pick up system flags
	sed -ri '/^(C|LD)FLAGS/s/ = /+=/g' st-$version/config.mk

	make -C st-$version             \
		CC="${CC:-cc}"          \
		PREFIX=/usr             \
		X11INC=/usr/include/X11 \
		X11LIB=/usr/lib         \
		DESTDIR=$PKG            \
		all install

	install -m 0644 -Dt $PKG/usr/share/applications/ $SRC/st.desktop
}
