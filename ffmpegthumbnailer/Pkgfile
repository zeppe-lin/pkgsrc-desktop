# Description: Thumbnail generator based on FFMPEG
# URL:         https://github.com/dirkvdb/ffmpegthumbnailer
# Depends on:  ffmpeg libjpeg-turbo

name=ffmpegthumbnailer
version=2.2.2
release=1
source=https://github.com/dirkvdb/$name/releases/download/$version/$name-$version.tar.bz2

build() {
	cmake -S $name-$version -B build -G Ninja    \
		-DCMAKE_INSTALL_PREFIX=/usr          \
		-DCMAKE_INSTALL_LIBDIR=lib           \
		-DBUILD_SHARED_LIBS=True             \
		-DCMAKE_BUILD_TYPE=RelWithDebugInfo  \
		-DCMAKE_CXX_FLAGS="$CXXFLAGS"        \
		-DCMAKE_C_FLAGS="$CFLAGS"            \
		-DENABLE_GIO=True                    \
		-DENABLE_THUMBNAILER=True            \
		-Wno-dev

	ninja -C build -j ${JOBS:-1} -v
	DESTDIR=$PKG ninja -C build install
}
