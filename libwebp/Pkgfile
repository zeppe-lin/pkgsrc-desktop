# Description: Library for a new image format comparable to JPEG
# URL:         https://developers.google.com/speed/webp/
# Depends on:  giflib libjpeg-turbo libpng 
# Optional:    libjpeg-turbo libtiff freeglut libsdl

name=libwebp
version=1.4.0
release=1
source=https://storage.googleapis.com/downloads.webmproject.org/releases/webp/$name-$version.tar.gz

build_opt() { PKGMK_LIBWEBP="$PKGMK_LIBWEBP $1"; }

build() {
	mkdir build; cd build

	# --disable-gl: otherwise requires freeglut
	# --disable-tiff: otherwise requires libtiff
	# --disable-sdl: otherwise requires libsdl or libsdl2
	../${name%-*}-$version/configure  \
		--prefix=/usr             \
		--disable-gl              \
		--disable-sdl             \
		--disable-tiff            \
		--enable-libwebpdecoder   \
		--enable-libwebpdemux     \
		--enable-libwebpmux       \
		--enable-static           \

	make V=1
	make DESTDIR=$PKG install
}
