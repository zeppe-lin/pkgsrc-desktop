# Description: Curses URL parser for text files
# URL:         https://git.sr.ht/~nabijaczleweli/urlview-ng
# Depends on:  ncurses

name=urlview
version=1e
release=1
source=$name-$version.tar.gz::https://git.sr.ht/~nabijaczleweli/urlview-ng/archive/1e.tar.gz

build() {
	export PREFIX=/usr
	export DEFAULT_COMMAND=/etc/urlview/url_handler.sh
	export SYSTEM_INITFILE=/etc/urlview/system.urlview
	export VERSION=$version
	export TZ=UTC0
	export SOURCE_DATE_EPOCH=

	# skip locales generation
	sed -i 's/^install: all/install: urlview urlview.1 sample.urlview/' \
		$name-ng-$version/Makefile

	make -C $name-ng-$version LOCALES= DESTDIR=$PKG install

	# remove junk
	rmdir $PKG/usr/share/locale
}
