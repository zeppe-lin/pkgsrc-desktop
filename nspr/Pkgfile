# Description: Netscape Portable Runtime library
# URL:         https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSPR

name=nspr
version=4.36
release=1
source=https://ftp.mozilla.org/pub/nspr/releases/v$version/src/nspr-$version.tar.gz

build() {
	cd nspr-$version/nspr

	./configure                             \
		--prefix=/usr                   \
		--libdir=/usr/lib               \
		--includedir=/usr/include/nspr  \
		--enable-optimize="$CFLAGS"     \
		--enable-64bit                  \
		--disable-debug                 \

	make V=1
	make DESTDIR=$PKG install

	mkdir -p $PKG/usr/lib/pkgconfig
	cat > $PKG/usr/lib/pkgconfig/nspr.pc <<EOF
prefix=/usr
exec_prefix=/usr/bin
libdir=/usr/lib
includedir=/usr/include/nspr

Name: NSPR
Description: The Netscape Portable Runtime
Version: $(./config/nspr-config --version)
Libs: $(./config/nspr-config --libs)
Cflags: $(./config/nspr-config --cflags)
EOF

	# remove junk
	rm -r $PKG/usr/bin/compile-et.pl     \
	      $PKG/usr/bin/prerr.properties  \
	      $PKG/usr/include/nspr/md
}
